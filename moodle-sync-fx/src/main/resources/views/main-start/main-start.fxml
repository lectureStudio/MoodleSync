<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<?import moodle.sync.javafx.CourseListCell?>
<?import moodle.sync.javafx.CourseCellFactory?>
<?import moodle.sync.javafx.SectionListCell?>
<?import moodle.sync.javafx.SectionCellFactory?>

<!--
    In this document, the layout of the "start-page" is defined
    @author Daniel Schröter
-->

<?import moodle.sync.javafx.UploadElementCellValueFactory?>
<?import moodle.sync.javafx.CheckBoxTableCellFactory?>
<?import javafx.scene.control.cell.PropertyValueFactory?>
<?import moodle.sync.javafx.HighlightSectionCellFactory?>
<?import moodle.sync.javafx.StatusCellFactory?>
<?import moodle.sync.javafx.DragAndDropRowFactory?>
<?import org.lecturestudio.javafx.layout.DynamicResizePolicy?>
<?import org.lecturestudio.javafx.layout.ColumnSizeConstraints?>
<?import moodle.sync.javafx.AvailabilityCellValueFactory?>
<?import moodle.sync.javafx.AvailableDateTimeTableCellFactory?>
<?import moodle.sync.javafx.AvailabilityCellFactory?>
<fx:root alignment="CENTER" type="VBox" xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1">
    <BorderPane VBox.vgrow="ALWAYS" xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1">
        <top>
            <HBox alignment="CENTER_LEFT" spacing="5.0">
                <VBox>
                    <Label text ="Kurs"/>
                    <ComboBox fx:id="courseCombo">
                        <buttonCell>
                            <CourseListCell/>
                        </buttonCell>
                        <cellFactory>
                            <CourseCellFactory/>
                        </cellFactory>
                    </ComboBox>
                </VBox>
                <VBox>
                    <Label text ="Sektion"/>
                    <ComboBox fx:id="sectionCombo">
                        <buttonCell>
                            <SectionListCell/>
                        </buttonCell>
                        <cellFactory>
                            <SectionCellFactory/>
                        </cellFactory>
                    </ComboBox>
                </VBox>
               <Pane HBox.hgrow="ALWAYS"/>
                <Button fx:id="syncButton" mnemonicParsing="false" text="%start.sync"/>
                <Button fx:id="settingsButton" mnemonicParsing="false" text="%start.settings"/>
                <padding>
                    <Insets bottom="5.0" left="5.0" right="5.0" top="5.0"/>
                </padding>
            </HBox>
        </top>
        <center>
            <TableView fx:id="syncTable" BorderPane.alignment="CENTER" editable="true" prefHeight="20.0">
                <rowFactory>
                    <DragAndDropRowFactory/>
                </rowFactory>
                <columnResizePolicy>
                    <DynamicResizePolicy tableView="$syncTable">
                        <columnConstraints>
                            <ColumnSizeConstraints percentWidth="0.5"/>
                            <ColumnSizeConstraints percentWidth="0.5"/>
                            <ColumnSizeConstraints prefWidth="100.0"/>
                            <ColumnSizeConstraints prefWidth="100.0"/>
                            <ColumnSizeConstraints prefWidth="200.0"/>
                        </columnConstraints>
                    </DynamicResizePolicy>
                </columnResizePolicy>
                <columns>
                    <TableColumn fx:id="courseViewTableColumn" text="Moodle">
                    <cellFactory>
                            <HighlightSectionCellFactory/>
                        </cellFactory>
                        <cellValueFactory>
                            <PropertyValueFactory property="moduleName"/>
                        </cellValueFactory>
                    </TableColumn>
                    <TableColumn fx:id="localViewTableColumn" text="Lokal">
                        <cellFactory>
                            <StatusCellFactory/>
                        </cellFactory>
                        <cellValueFactory>
                            <PropertyValueFactory property="existingFileName"/>
                        </cellValueFactory>
                    </TableColumn>
                    <TableColumn fx:id="executeTableColumn" styleClass="CENTER" editable="true" text="Ausführen">
                        <cellFactory>
                            <CheckBoxTableCellFactory/>
                        </cellFactory>
                        <cellValueFactory>
                            <UploadElementCellValueFactory/>
                        </cellValueFactory>
                    </TableColumn>
                    <TableColumn fx:id="availabilityTableColumn" styleClass="CENTER" editable="true" text="Sichtbarkeit">
                        <cellFactory>
                            <AvailabilityCellFactory/>
                        </cellFactory>
                        <cellValueFactory>
                            <AvailabilityCellValueFactory/>
                        </cellValueFactory>
                    </TableColumn>
                    <TableColumn fx:id="availabilityTimeTableColumn" styleClass="CENTER" editable="true" text="Zeitpunkt">
                        <cellFactory>
                            <AvailableDateTimeTableCellFactory/>
                        </cellFactory>
                        <cellValueFactory>
                            <PropertyValueFactory property="availabilityDateTime"/>
                        </cellValueFactory>
                    </TableColumn>
                    <!--<TableColumn fx:id="visibleTableColumn" styleClass="CENTER" editable="true" prefWidth="75.0" text="Sichtbarkeit">
                        <cellFactory>
                            <ToggleButtonTableCellFactory/>
                        </cellFactory>
                        <cellValueFactory>
                            <ToggleButtonCellValueFactory/>
                        </cellValueFactory>
                    </TableColumn>-->
                </columns>
                <BorderPane.margin>
                    <Insets bottom="10.0" left="10.0" right="10.0" top="10.0"/>
                </BorderPane.margin>

            </TableView>
        </center>
    </BorderPane>
</fx:root>
